[gd_scene load_steps=6 format=2]

[ext_resource path="res://Scenes/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Graphics/Backgourn.png" type="Texture" id=2]
[ext_resource path="res://Scenes/GUI.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

func _ready():
	pass # Replace with function body.

func _process(delta):
	$GUI/Hp.value     = $Player.hp
	$GUI/Energy.value = $Player.energy"

[sub_resource type="GDScript" id=2]
script/source = "extends Node2D




func _ready():
	pass # Replace with function body.
	
var time              = 0
var time_to_spawn     = 5
var max_distance      = 550
var min_distance      = 100

func spawn():
	if time < time_to_spawn : return
	time = 0
	
	var player = get_parent().get_node(\"Player\")
	
	var around = Vector2( randf() - 1 + randf(), randf() - 1 + randf())
	var distance = randi()%max_distance + min_distance
	
	var plastic_position = around * distance + player.position
	
	var plastic = load( \"res://Scenes/Plastic.tscn\" )
	plastic = plastic.instance()
	plastic.position = plastic_position
	get_parent().add_child(plastic)

func _process(delta):
	time += delta
	spawn()
	
	"

[node name="Main" type="Node2D"]
script = SubResource( 1 )

[node name="Player" parent="." groups=[
"player",
] instance=ExtResource( 1 )]
position = Vector2( 789, 372 )
z_index = 1

[node name="Backgourn" type="Sprite" parent="."]
position = Vector2( 862.669, 433.235 )
texture = ExtResource( 2 )

[node name="GUI" parent="." instance=ExtResource( 3 )]

[node name="Spawner" type="Node2D" parent="."]
script = SubResource( 2 )
